/** 
 * Collision Test - Automatically drops blocks to test collision detection
 * No user input required - just watch blocks fall and stack
 */
class RenderTest {
    field Grid grid;
    field Blocks currentBlock;
    field Bag bag;
    
    constructor RenderTest new() {
        //Initialize block constants
        do Blocks.init();
        
        //Create grid (10 wide, 20 tall)
        let grid = Grid.new(10, 20);
        
        // Create bag randomizer with seed
        let bag = Bag.new(25173);  // Different seed for variety
        
        // Spawn first block
        let currentBlock = Blocks.new(bag.getNextBlock());
        
        return this;
    }
    
    method void run() {
        
        // Display test info
        do Output.moveCursor(0, 0);            
        // Render
        do draw();
        return;
    }
    
    method void draw() {
        // Clear screen
        do Screen.clearScreen();
        
        // Draw grid with locked blocks
        do grid.draw();
        
        // Draw current falling block
        do currentBlock.draw(grid);
        
        return;
    }
    
    method void dispose() {
        do grid.dispose();
        do currentBlock.dispose();
        do bag.dispose();
        do Memory.deAlloc(this);
        return;
    }
}